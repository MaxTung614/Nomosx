# 管理员面板访问指南

## 📋 目录
1. [如何进入管理员面板](#如何进入管理员面板)
2. [创建管理员账号](#创建管理员账号)
3. [管理员功能](#管理员功能)
4. [常见问题](#常见问题)

---

## 如何进入管理员面板

### 方式一：直接访问（推荐）

在浏览器地址栏输入：
```
/enen
```

这会打开专门的管理员登录页面。

### 方式二：从前台页面进入

如果您已经以管理员身份登录：

1. 在首页右上角会看到 **"管理面板"** 按钮（带 🛡️ Shield 图标）
2. 点击该按钮即可进入后台

---

## 创建管理员账号

### 第一个管理员账号（冷启动）

由于更新用户角色需要现有管理员权限，您需要使用 Supabase Dashboard 手动创建第一个管理员账号：

#### 步骤 1：注册普通账号
1. 访问网站首页
2. 点击 **"註冊"** 按钮
3. 填写邮箱和密码
4. 完成注册

#### 步骤 2：在 Supabase Dashboard 中升级为管理员

1. 登录 [Supabase Dashboard](https://supabase.com/dashboard)
2. 选择您的项目
3. 进入 **Authentication** → **Users**
4. 找到刚才注册的用户
5. 点击用户查看详情
6. 找到 **User Metadata** 部分
7. 点击 **Edit** 按钮
8. 添加或修改 `role` 字段：
   ```json
   {
     "role": "admin"
   }
   ```
9. 保存更改

#### 步骤 3：重新登录
1. 退出当前账号（如果已登录）
2. 访问 `/enen`
3. 使用刚才升级的账号登录
4. 现在您可以访问管理员面板了！

---

### 后续管理员账号

第一个管理员账号创建后，可以通过管理员面板创建更多管理员：

1. 以管理员身份登录后台
2. 进入 **用户管理** 标签
3. 找到要升级的用户
4. 点击用户旁边的角色选择器
5. 选择 `admin` 或 `cs`（客服）角色
6. 保存更改

---

## 管理员功能

### 🎮 首页游戏管理
- 查看所有首页展示的游戏
- 新增游戏卡片（名称、封面、价格、标签等）
- 编辑游戏信息
- 删除游戏
- 上传游戏封面图片
- 调整游戏显示顺序

### 📦 CMS 内容管理
- **地区管理**：管理游戏服务地区（如美服、欧服等）
- **平台管理**：管理游戏平台（iOS、Android、PC 等）
- **显示标签**：管理产品标签（热门、限时优惠等）
- **游戏库**：管理完整的游戏数据库
- **面额管理**：管理各游戏的充值面额和价格

### 📊 订单管理
- 查看所有订单
- 订单状态管理
- 履行订单
- 导出订单数据（CSV）

### 💰 支付管理
- 查看支付记录
- 订单统计数据
- 收入分析

### 👥 用户管理
- 查看所有注册用户
- 分配用户角色（admin、cs、user）

---

## 用户角色说明

### 🔴 Admin（管理员）
- **权限**：完全访问权限
- **功能**：
  - 所有 CMS 功能
  - 订单管理
  - 支付管理
  - 用户管理（包括分配角色）
  - 首页游戏管理

### 🟡 CS（客服）
- **权限**：部分访问权限
- **功能**：
  - 查看订单
  - 履行订单
  - 查看支付记录
  - 无法修改 CMS 内容
  - 无法管理用户角色

### 🟢 User（普通用户）
- **权限**：前台访问权限
- **功能**：
  - 浏览商品
  - 下单购买
  - 查看自己的订单
  - 无法访问后台

---

## 常见问题

### ❓ 我忘记了管理员密码怎么办？

1. 在登录页面点击 "忘记密码"（如果已实现）
2. 或者在 Supabase Dashboard 中手动重置密码：
   - **Authentication** → **Users**
   - 找到您的账号
   - 点击 **"..."** → **Reset Password**

### ❓ 为什么我登录后看不到管理面板按钮？

可能的原因：
1. **角色未正确设置**：检查 Supabase 中的 `user_metadata.role` 字段
2. **需要重新登录**：角色更新后需要退出并重新登录
3. **浏览器缓存**：清除浏览器缓存后重试

### ❓ 如何查看我的当前角色？

1. 登录后台
2. 右上角会显示您的用户信息和角色标签
3. 或者在浏览器控制台运行：
   ```javascript
   JSON.parse(localStorage.getItem('supabase.auth.token'))
   ```

### ❓ 可以有多个管理员吗？

是的！系统支持多个管理员账号。建议：
- 至少创建 2 个管理员账号（防止意外锁定）
- 为日常操作创建客服（CS）账号
- 定期审查用户权限

### ❓ 管理员面板的 URL 是什么？

- **管理员面板**：`/enen`（包含登录页面和后台首页）

---

## 🔒 安全提示

1. **使用强密码**：管理员账号应使用复杂的密码
2. **定期更换密码**：建议每 3-6 个月更换一次
3. **最小权限原则**：只给必要的人分配管理员权限
4. **监控日志**：定期检查后台操作日志
5. **不要共享账号**：每个管理员应有独立账号

---

## 📞 技术支持

如果遇到问题，请检查：
1. 浏览器控制台的错误信息
2. Supabase Dashboard 中的用户数据
3. Edge Function 日志（在 Supabase Functions 面板）

---

**最后更新**：2025-11-05  
**文档版本**：1.0.0
